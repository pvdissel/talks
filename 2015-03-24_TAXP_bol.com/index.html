<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="author" content="Patrick van Dissel"><title>Test Acceptance X-production Production</title><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui" name="viewport"><link href="reveal.js/css/reveal.css" rel="stylesheet"><link rel="stylesheet" href="theme/bol.com/bol.com.css" id="theme"><link href="highlight.js/styles/solarized_dark.css" title="default syntax highlighting" rel="stylesheet"><link href="highlight.js/styles/solarized_light.css" title="alternative syntax highlighting" rel="alternate stylesheet"><script type="text/javascript">document.write( '<link rel="stylesheet" href="reveal.js/css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );</script></head><body><div class="reveal"><div class="slides"><section><div id="header"><h1>Test Acceptance X-production Production</h1><div class="details"><span class="author" id="author">Patrick van Dissel</span><br><span class="email" id="email"><a href="https://twitter.com/pvdissel">@pvdissel</a></span><br></div></div></section><section id="_taxp"><h2>TAXP</h2><div class="imageblock" style=""><div class="content"><img src="./images/diag-9b2eca16fce3c517763c51c1107a4285.png" alt="Diagram" width="620" height="140"></div></div>
<aside class="notes"><div class="paragraph"><p>TAXP stands for the different environments we have,
Test, Acceptance, X-Production, Production</p></div>
<div class="paragraph"><p>I expect this is nothing new, and you know
the differences between the environments.</p></div></aside></section>
<section><section id="_jenkins" data-transition="fade"><h2>Jenkins</h2><div class="imageblock" style=""><div class="content"><img src="./images/diag-2be679cb20710f9bf8b69a0a98e858a3.png" alt="Diagram" width="620" height="140"></div></div><aside class="notes"><div class="paragraph"><p>Viewed from the Jenkins perspective,
there are only three environments.
Test, Acceptance, X-Production/Production aka XprPro</p></div>
<div class="paragraph"><p>As you build fixes for PRO on XPR,
and the deployable from XPR is also deployed to PRO</p></div></aside></section><section id="_pipeline" data-transition="fade"><h2>Pipeline</h2><div class="imageblock" style=""><div class="content"><img src="./images/diag-2be679cb20710f9bf8b69a0a98e858a3.png" alt="Diagram" width="620" height="140"></div></div>
<aside class="notes"><div class="paragraph"><p>The process by which
code or configuration
progresses from the
developer&#8217;s workstation
into the production environment.</p></div>
<div class="paragraph"><p>The "pipeline".</p></div></aside></section><section id="_gates" data-transition="fade"><h2>Gates</h2><div class="imageblock" style=""><div class="content"><img src="./images/diag-d1017db7230e7b0667b04fef6bb696c8.png" alt="Diagram" width="640" height="140"></div></div></section><section id="_stages" data-transition="fade"><h2>Stages</h2><div class="imageblock" style=""><div class="content"><img src="./images/diag-96cac2961e5b2747abe0dffa49645e39.png" alt="Diagram" width="420" height="140"></div></div>
<aside class="notes"></aside></section><section id="_for_test" data-transition="fade"><h2>For TEST</h2><div class="imageblock" style=""><div class="content"><img src="./images/diag-1e507769fbcfe887b6152eb97221b162.png" alt="Diagram" width="530" height="224"></div></div></section><section id="_for_test_2" data-transition="fade"><h2>For TEST</h2><div class="imageblock" style=""><div class="content"><img src="./images/diag-bdaca095dfce85c633a2e350e35d1a8c.png" alt="Diagram" width="530" height="238"></div></div></section><section id="_for_test_3" data-transition="fade"><h2>For TEST</h2><div class="imageblock" style=""><div class="content"><img src="./images/diag-05264f2a3110f3d7392d774f25f75890.png" alt="Diagram" width="730" height="238"></div></div></section><section id="_for_acc" data-transition="fade"><h2>For Acc</h2><div class="imageblock" style=""><div class="content"><img src="./images/diag-2074ccbfd7ee95d8d0963b10d1e64e0c.png" alt="Diagram" width="510" height="168"></div></div></section><section id="_for_xprpro" data-transition="fade"><h2>For XprPro</h2><div class="imageblock" style=""><div class="content"><img src="./images/diag-f2996033af257e7bd96d41695d139cdf.png" alt="Diagram" width="540" height="182"></div></div></section><section id="_pipeline_2"><h2>Pipeline</h2><div class="imageblock" style=""><div class="content"><img src="./images/diag-b364f808caa9d0fafcb90507ff319bc7.png" alt="Diagram" width="640" height="252"></div></div></section></section>
<section><section id="__strong_18_strong_jobs_per_project"><h2>~<strong>18</strong> jobs per project</h2><aside class="notes"><div class="paragraph"><p>This makes an average of 18 jobs per project.</p></div>
<div class="paragraph"><p>Excluding the SprintHopping and System jobs
that have to do work with or based on the projects.</p></div></aside></section><section id="_juli_2014"><h2>Juli 2014</h2><div class="paragraph"><p>All ~<strong>1000</strong> jobs<br>
manually configured</p></div>
<aside class="notes"><div class="paragraph"><p>In Juli 2014,
we had about 1000 jobs
which were manually
configured and maintained.</p></div>
<div class="paragraph"><p>With one Engineer On Duty, to
create and maintain these jobs&#8230;&#8203;
it was a fulltime, error-prone
no-fun task.
Resulting in long wait times
for you, the users.
And we often had to do an
all-team "service request monday"
to temporarily clean the list
of waiting service requests</p></div></aside></section><section id="_march_2015"><h2>March 2015</h2><div class="paragraph"><p>~<strong>1400</strong> jobs<br>
of which ~<strong>1300</strong> generated</p></div>
<aside class="notes"><div class="paragraph"><p>Today, we have about 1400 jobs
of which 1300 are generated.</p></div>
<div class="paragraph"><p>So we still got about 100 jobs
which are manually configured.</p></div>
<div class="paragraph"><p>25 of them are System jobs,
which we use for Jenkins and
Jenkins infrastructure specific tasks.</p></div>
<div class="paragraph"><p>Meaning 75 are still for
applications and libraries.
Like:
- WSP (~18)
- BIZ Modules (~40)</p></div></aside></section></section>
<section><section id="_taxp_job_generator"><h2>TAXP-job-generator</h2><div class="imageblock" style=""><div class="content"><img src="./images/taxp-job-generator.png" alt="taxp job generator"></div></div></section><section id="_jenkins_job_generator"><h2>Jenkins job generator</h2><div class="ulist"><ul><li class="fragment"><p>Follows TAXP standards</p></li><li class="fragment"><p>Sprinthops with the projects</p></li><li class="fragment"><p>Documented</p></li><li class="fragment"><p>Tested</p></li><li class="fragment"><p>One json file per project</p></li></ul></div></section></section>
<section><section><div class="imageblock" style=""><div class="content"><img src="./images/self-service-laundry.jpg" alt="self service laundry"></div></div></section><section id="_workflow"><h2>Workflow</h2><div class="ulist"><ul><li class="fragment"><p>Create git repositories<br>
(<code>System_Create_Git_Repositories</code>)</p></li><li class="fragment"><p>Fork <code>dpi/taxp-job-generator</code></p></li><li class="fragment"><p>Make change on branch</p></li><li class="fragment"><p>Test/inspect locally</p></li><li class="fragment"><p>Commit &amp;&amp; push</p></li><li class="fragment"><p>Create merge-request</p></li></ul></div></section><section id="_seed"><h2>Seed</h2><div class="ulist"><ul><li class="fragment"><p><code>Seed</code> job is triggered after push to <code>master</code><br></p></li><li class="fragment"><p><code>Seed_Acc</code> and <code>Seed_XprPro</code> on push to specific branch</p></li><li class="fragment"><p>Seed job run takes ~1 minute<br>
(unless <em>busy</em>, may take ~10 minutes)</p></li><li class="fragment"><p>Seed job updates Jenkins jobs to new state</p></li></ul></div></section></section>
<section id="_not_perfect"><h2>Not perfect</h2><div class="ulist"><ul><li class="fragment"><p>Limited by implementation</p></li><li class="fragment"><p>No strict checking</p></li></ul></div></section>
<section id="_next_steps"><h2>Next steps</h2><div class="ulist"><ul><li class="fragment"><p>Support MotM phases</p></li><li class="fragment"><p>Strict config validation</p></li><li class="fragment"><p>Generic config</p><div class="ulist"><ul><li><p>Custom pipelines</p></li><li><p>Hook into standards<br>
(eg. artifactory, rundeck, &#8230;&#8203;)</p></li></ul></div></li></ul></div></section>
<section><section id="_mayfly" data-background="./images/mayfly-feature.png"><h2>MayFly</h2></section><section><div class="ulist"><ul><li><p>pipeline config in project repo</p></li><li><p>project team in control of pipeline</p></li></ul></div></section></section>
<section id="_resources"><h2>Resources</h2><div class="ulist"><ul><li><p>Confluence</p><div class="ulist"><ul><li><p><a href="http://bolnl-confluence/display/scrumproces/DPI">scrumproces/DPI</a></p></li><li><p><a href="http://bolnl-confluence/display/scrumproces/Creating+your+own+GIT+repositories">Creating your own GIT repositories</a></p></li><li><p><a href="http://bolnl-confluence/display/scrumproces/Managing+your+own+pipeline+configuration+-+TAXP+job+generator">Managing your own pipeline configuration</a></p></li></ul></div></li><li><p><a href="https://github.com/pvdissel/talk-jenkins-jobdsl">Cultivating the Jenkins job jungle with Groovy @ JFall 2014</a></p></li></ul></div>
<div class="paragraph"><p>Give feedback &amp; discuss ideas</p></div></section>
<section id="_thanks"><h2>Thanks</h2><div class="paragraph"><p>Slides<br>
<a href="http://ikoodi.nl/talks" class="bare">http://ikoodi.nl/talks</a><br>
<a href="https://github.com/pvdissel/talks" class="bare">https://github.com/pvdissel/talks</a></p></div>
<div class="paragraph"><p><a href="https://twitter.com/pvdissel">@pvdissel</a></p></div></section></div></div><script src="reveal.js/lib/js/head.min.js"></script><script src="reveal.js/js/reveal.js"></script><script type="text/javascript">// See https://github.com/hakimel/reveal.js#configuration for a full list of configuration options
Reveal.initialize({
  // Display controls in the bottom right corner
  controls: true,
  // Display a presentation progress bar
  progress: true,
  // Display the page number of the current slide
  slideNumber: false,
  // Push each slide change to the browser history
  history: true,
  // Enable keyboard shortcuts for navigation
  keyboard: true,
  // Enable the slide overview mode
  overview: true,
  // Vertical centering of slides
  center: true,
  // Enables touch navigation on devices with touch input
  touch: true,
  // Loop the presentation
  loop: false,
  // Change the presentation direction to be RTL
  rtl: false,
  // Turns fragments on and off globally
  fragments: true,
  // Flags if the presentation is running in an embedded mode,
  // i.e. contained within a limited portion of the screen
  embedded: false,
  // Number of milliseconds between automatically proceeding to the
  // next slide, disabled when set to 0, this value can be overwritten
  // by using a data-autoslide attribute on your slides
  autoSlide: 0,
  // Stop auto-sliding after user input
  autoSlideStoppable: true,
  // Enable slide navigation via mouse wheel
  mouseWheel: false,
  // Hides the address bar on mobile devices
  hideAddressBar: true,
  // Opens links in an iframe preview overlay
  previewLinks: false,
  // Theme (e.g., beige, black, blood, league, moon, night, serif, simple, sky, solarized, white)
  theme: Reveal.getQueryHash().theme || 'black',
  // Transition style (e.g., none, fade, slide, convex, concave, zoom)
  transition: Reveal.getQueryHash().transition || 'linear',
  // Transition speed (e.g., default, fast, slow)
  transitionSpeed: 'default',
  // Transition style for full page slide backgrounds (e.g., none, fade, slide, convex, concave, zoom)
  backgroundTransition: 'default',
  // Number of slides away from the current that are visible
  viewDistance: 3,
  // Parallax background image (e.g., "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'")
  parallaxBackgroundImage: '',
  // Parallax background size in CSS syntax (e.g., "2100px 900px")
  parallaxBackgroundSize: '',
  // Optional libraries used to extend on reveal.js
  dependencies: [
    { src: 'reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
    { src: 'reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
    { src: 'reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
    { src: 'reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
    { src: 'reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
    { src: 'reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
    { src: 'reveal.js/plugin/math/math.js', async: true}
  ]
});</script></body></html>